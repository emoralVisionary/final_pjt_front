{"remainingRequest":"/Users/emoralvisionary/Projects/movie_proj/final_pjt_front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/emoralvisionary/Projects/movie_proj/final_pjt_front/src/views/MovieReview.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/emoralvisionary/Projects/movie_proj/final_pjt_front/src/views/MovieReview.vue","mtime":1637534788663},{"path":"/Users/emoralvisionary/Projects/movie_proj/final_pjt_front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/emoralvisionary/Projects/movie_proj/final_pjt_front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/emoralvisionary/Projects/movie_proj/final_pjt_front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/emoralvisionary/Projects/movie_proj/final_pjt_front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdNb3ZpZVJldmlldycsCiAgcHJvcHM6IHsKICAgIHJldmlldzogT2JqZWN0CiAgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIGNvbnN0IGluZGV4ID0gdGhpcy4kcm91dGUucGFyYW1zLnJldmlld0lkOwogICAgcmV0dXJuIHsKICAgICAgaW5kZXg6IGluZGV4LAogICAgICByZXZpZXdGb3JtOiB7CiAgICAgICAgdGl0bGU6IGluZGV4ICE9PSB1bmRlZmluZWQgPyB0aGlzLnJldmlldy50aXRsZSA6ICIiLAogICAgICAgIGNvbnRlbnQ6IGluZGV4ICE9PSB1bmRlZmluZWQgPyB0aGlzLnJldmlldy5jb250ZW50IDogIiIsICAgICAgCiAgICAgICAgcmFuazogaW5kZXggIT09IHVuZGVmaW5lZCA/IHRoaXMucmV2aWV3LnJhbmsgOiAwCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZVJldmlldygpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5yZXZpZXdGb3JtKQogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgdXJsOiBgaHR0cDovLzEyNy4wLjAuMTo4MDAwL21vdmllcy8keyB0aGlzLm1vdmllRGF0YS5pZCB9L3Jldmlld3MvYCwKICAgICAgICBoZWFkZXJzOiB0aGlzLnRva2VuLAogICAgICAgIGRhdGE6IHRoaXMucmV2aWV3Rm9ybSwKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAvLyByZS1sb2FkIG1vdmllIAogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ0xvYWREZXRhaWwnLCB0aGlzLm1vdmllRGF0YS5pZCkKICAgICAgICAgIC8vIHRvIHJldmlldyBkZXRhaWwKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ01vdmllRGV0YWlsJywgcGFyYW1zOiB7IG1vdmllSWQ6IHRoaXMubW92aWVEYXRhLmlkfSB9KQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKGVycikpCiAgICB9LAogICAgdXBkYXRlUmV2aWV3KCkgewogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAncHV0JywKICAgICAgICB1cmw6IGBodHRwOi8vMTI3LjAuMC4xOjgwMDAvbW92aWVzLyR7dGhpcy5tb3ZpZURhdGEuaWR9L3Jldmlld3MvJHt0aGlzLmluZGV4fS91cGRhdGVfZGVsZXRlL2AsCiAgICAgICAgaGVhZGVyczogdGhpcy50b2tlbiwKICAgICAgICBkYXRhOiB0aGlzLnJldmlld0Zvcm0sCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgLy8gcmUtbG9hZCBtb3ZpZSAKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdMb2FkRGV0YWlsJywgdGhpcy5tb3ZpZURhdGEuaWQpCiAgICAgICAgICAvLyB0byByZXZpZXcgZGV0YWlsCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdNb3ZpZURldGFpbCcsIHBhcmFtczogeyBtb3ZpZUlkOiB0aGlzLm1vdmllRGF0YS5pZH0gfSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihlcnIpKQogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbJ21vdmllRGF0YScsICd0b2tlbiddKSwKICB9Cn0K"},{"version":3,"sources":["MovieReview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MovieReview.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <h1>Movie Review</h1>\n    <h2>{{ movieData.title }} 리뷰 작성</h2>\n    <div>\n      <label for=\"title\">제목: </label>\n      <input \n        type=\"text\" \n        id=\"title\"\n        v-model=\"reviewForm.title\"\n      >\n    </div>\n    <div>\n      <label for=\"content\">내용: </label>\n      <input \n        type=\"text\" \n        id=\"content\"\n        v-model=\"reviewForm.content\"\n      >\n    </div>\n    <div>\n      <label for=\"rank\">평점: </label>\n      <input \n        type=\"number\" \n        id=\"rank\"\n        v-model.number=\"reviewForm.rank\"\n      >\n    </div>\n    <button @click=\"index !== undefined ? updateReview() : createReview()\">\n      {{index !== undefined ? '수정' : '작성'}}\n    </button>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport axios from 'axios'\n\nexport default {\n  name: 'MovieReview',\n  props: {\n    review: Object\n  },\n  data: function() {\n    const index = this.$route.params.reviewId;\n    return {\n      index: index,\n      reviewForm: {\n        title: index !== undefined ? this.review.title : \"\",\n        content: index !== undefined ? this.review.content : \"\",      \n        rank: index !== undefined ? this.review.rank : 0\n      }\n    }\n  },\n  methods: {\n    createReview() {\n      console.log(this.reviewForm)\n      axios({\n        method: 'post',\n        url: `http://127.0.0.1:8000/movies/${ this.movieData.id }/reviews/`,\n        headers: this.token,\n        data: this.reviewForm,\n      })\n        .then(() => {\n          // re-load movie \n          this.$store.dispatch('LoadDetail', this.movieData.id)\n          // to review detail\n          this.$router.push({ name: 'MovieDetail', params: { movieId: this.movieData.id} })\n        })\n        .catch(err => console.error(err))\n    },\n    updateReview() {\n      axios({\n        method: 'put',\n        url: `http://127.0.0.1:8000/movies/${this.movieData.id}/reviews/${this.index}/update_delete/`,\n        headers: this.token,\n        data: this.reviewForm,\n      })\n        .then(() => {\n          // re-load movie \n          this.$store.dispatch('LoadDetail', this.movieData.id)\n          // to review detail\n          this.$router.push({ name: 'MovieDetail', params: { movieId: this.movieData.id} })\n        })\n        .catch(err => console.error(err))\n    },\n  },\n  computed: {\n    ...mapState(['movieData', 'token']),\n  }\n}\n</script>\n\n<style>\n\n</style>"]}]}